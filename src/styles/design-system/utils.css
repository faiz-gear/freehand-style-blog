/* 
 * 手绘风格博客工具类样式
 * 提供辅助手绘效果的工具类
 */

/* 纸张纹理背景 */
.bg-paper {
  background-color: var(--color-paper-primary);
  /* 纸张纹理 */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.03'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

.bg-paper-secondary {
  background-color: var(--color-paper-secondary);
  /* 稍微不同的纸张纹理 */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.02'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

/* 手绘边框风格 */
.border-hand {
  position: relative;
  /* 轻微不规则的边框 */
  border: 2px solid var(--color-ink-primary);
  border-radius: 8px 6px 10px 7px;
}

.border-hand-dashed {
  border: 2px dashed var(--color-ink-secondary);
  border-radius: 10px 6px 12px 8px;
}

.border-hand-thin {
  border: 1px solid var(--color-ink-light);
  border-radius: 6px 7px 5px 8px;
}

/* 手绘阴影 */
.shadow-hand {
  box-shadow: 3px 3px 0 var(--color-shadow);
}

.shadow-hand-lg {
  box-shadow: 5px 5px 0 var(--color-shadow-dark);
}

/* 手绘旋转变换工具类 */
.rotate-hand-slight-left {
  transform: rotate(-1deg);
}

.rotate-hand-slight-right {
  transform: rotate(1deg);
}

.rotate-hand-left {
  transform: rotate(-2deg);
}

.rotate-hand-right {
  transform: rotate(2deg);
}

/* 手绘透明度变化（模拟水墨浓淡） */
.opacity-hand-light {
  opacity: 0.7;
}

.opacity-hand-medium {
  opacity: 0.85;
}

/* 手绘文本装饰 */
.text-decoration-hand {
  text-decoration: underline;
  text-decoration-style: wavy;
  text-decoration-color: var(--color-ink-secondary);
  text-underline-offset: 3px;
}

/* 手绘标记/高亮 */
.mark-hand {
  position: relative;
  display: inline;
}

.mark-hand::before {
  content: "";
  position: absolute;
  left: -4px;
  right: -4px;
  top: 60%;
  height: 0.5em;
  background-color: var(--color-accent-yellow-light);
  opacity: 0.5;
  z-index: -1;
  /* 不规则形状 */
  border-radius: 3px 5px 12px 4px;
  /* 旋转高亮 */
  transform: rotate(-0.5deg);
}

/* 手绘风格的空间分隔工具类 */
.mt-hand-sm {
  margin-top: calc(0.5rem + 2px);
}

.mt-hand-md {
  margin-top: calc(1rem + 3px);
}

.mt-hand-lg {
  margin-top: calc(1.5rem + 5px);
}

.mb-hand-sm {
  margin-bottom: calc(0.5rem + 2px);
}

.mb-hand-md {
  margin-bottom: calc(1rem + 3px);
}

.mb-hand-lg {
  margin-bottom: calc(1.5rem + 5px);
}

/* 铅笔划线动画 */
.pencil-line-animation {
  position: relative;
  overflow: hidden;
}

.pencil-line-animation::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 3px;
  /* 使用清新蓝色波浪线 */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='4' viewBox='0 0 200 4' fill='none'%3E%3Cpath d='M0 2C10 1 15 3 25 2C35 1 40 3 50 2C60 1 65 3 75 2C85 1 90 3 100 2C110 1 115 3 125 2C135 1 140 3 150 2C160 1 165 3 175 2C185 1 190 3 200 2' stroke='%237dc0d9' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: repeat-x;
  background-size: 200px 4px;
  /* 确保线条可见 */
  opacity: 1;
  /* 增加z-index确保线条在上层 */
  z-index: 1;
  /* 使用更自然的动画 */
  animation: pencilDrawHand 1.4s cubic-bezier(0.42, 0, 0.58, 1) forwards;
  transform-origin: left;
}

/* 手绘风格的铅笔线条动画 - 更流畅的版本 */
@keyframes pencilDrawHand {
  0% {
    width: 0;
    background-position: 0 0;
    opacity: 0.7;
  }
  20% {
    width: 35%;
    background-position: -3px 0;
    opacity: 0.8;
  }
  40% {
    width: 60%;
    background-position: -1px 0;
    opacity: 0.9;
  }
  70% {
    width: 85%;
    background-position: -2px 0;
    opacity: 0.95;
  }
  100% {
    width: 100%;
    background-position: -1px 0;
    opacity: 1;
  }
}

/* 打字机效果 - 用于标题动画 */
.typewriter {
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid var(--color-ink-primary);
  animation:
    typing 3.5s steps(40, end),
    blink-caret 0.75s step-end infinite;
}

@keyframes typing {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

@keyframes blink-caret {
  from,
  to {
    border-color: transparent;
  }
  50% {
    border-color: var(--color-ink-primary);
  }
}
